# ========================
# Clash-ALL ä¼˜åŒ–é…ç½®
# ========================

# æœºåœºèŠ‚ç‚¹è®¢é˜…

proxy-providers:
  æ™ºèƒ½èåˆ:
    url: "http://192.168.4.3:3008/T3B9dgzBzdRbBF8Aqx7P/download/collection/%E6%99%BA%E8%83%BD%E8%9E%8D%E5%90%88"
    type: http
    interval: 86400
    health-check:
      enable: true
      url: https://www.gstatic.com/generate_204
      interval: 300
    proxy: ç›´è¿
    #override:
      #additional-prefix: "å‰ç¼€ |"
      #additional-suffix: "| åç¼€"

  çº¢æ:
    url: "http://192.168.4.3:3008/T3B9dgzBzdRbBF8Aqx7P/download/%E7%BA%A2%E6%9D%8F"
    type: http
    interval: 86400
    health-check:
      enable: true
      url: https://www.gstatic.com/generate_204
      interval: 300
    proxy: ç›´è¿
    #override:
      #additional-prefix: "å‰ç¼€ |"
      #additional-suffix: "| åç¼€"

  è‡ªå»ºèŠ‚ç‚¹:
    url: "http://192.168.4.3:3008/T3B9dgzBzdRbBF8Aqx7P/download/collection/%E8%87%AA%E5%BB%BA%E8%8A%82%E7%82%B9"
    type: http
    interval: 86400
    health-check:
      enable: true
      url: https://www.gstatic.com/generate_204
      interval: 300
    proxy: ç›´è¿

proxies:
  - {name: ç›´è¿, type: direct}
  - {name: æ‹’ç», type: reject}

# ========================
# ä¸»è¦ç«¯å£è®¾ç½®
# ========================
port: 7890
socks-port: 7891
redir-port: 7892
mixed-port: 7893
tproxy-port: 7895

allow-lan: true
mode: rule
log-level: info

external-controller: 0.0.0.0:9090
# external-ui: ui
# external-ui-name: zashboard
# external-ui-url: https://gh-proxy.com/github.com/Zephyruso/zashboard/archive/refs/heads/gh-pages.zip
secret: "123456"

# ========================
# DNS è®¾ç½®
# ========================
dns:
  enable: true
  listen: 0.0.0.0:7874
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-range: 198.20.0.1/16
  nameserver:
  - 127.0.0.1:5335
  fallback:
  - 127.0.0.1:5335
  disable-ipv6: true
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    - +.lan
    - +.local
    - geosite:cn
# å¿«çŒ«    
    - +.km688.ink
# ç«çƒ§ 
    - +.onesubv.site
    - +.oneyyds.online
    - +.fengyyds.site
    - +.onemg.top    
# çŒ«è€³ 
    - +.chybinc.com
# BestVPN 
    - +.invitevp.com
    - +.vp2.us
# å°ç‰›
    - +.xiaoniuyun.cc  
# ç¡…è°·
    - +.apple-bing.sbs  
# æ— ç•Œ
    - +.bncrcloud.com
# å†°äº‘
    - +.xby01.xyz
# ç‰›é€¼   
    - +.idsduf.com  
    - +.66jc.top
# æé€Ÿé€š        
    - +.gfw.gg
# èŒç‹—       
    - +.moedog.cloud

# å…¶ä»–     
    - +.ynhtbank.com
    - +.qeayr.cn
    - +.saojc.xyz   
    - +.sssyun.xyz
    - +.dler.cloud
    - +.0tk8a3a1q4t94dler.com    
    - +.aerianas.top
    - +.gptacg.top
    - +.wxda.net

# ========================
# TUN æ¨¡å—
# ========================
tun:
  enable: true
  stack: gvisor
  device: utun
  endpoint-independent-nat: true
  auto-route: false
  auto-detect-interface: false
  auto-redirect: false
  strict-route: false

profile:
  store-selected: true
  store-fake-ip: true
 

# ========================
# ç­–ç•¥ç»„å®šä¹‰
# ========================
default: &default
  type: select
  proxies: [æ‰€æœ‰-è‡ªåŠ¨, è‡ªå»ºèŠ‚ç‚¹, AI-æ™ºé€‰, é¦™æ¸¯-æ™ºé€‰, å°æ¹¾-æ™ºé€‰, æ—¥æœ¬-æ™ºé€‰, æ–°åŠ å¡-æ™ºé€‰, éŸ©å›½-æ™ºé€‰, ç¾å›½-æ™ºé€‰, ç›´è¿, æ‹’ç»]

# === æ™ºèƒ½é”šç‚¹å®šä¹‰ ===
smart-base: &smart
  type: smart
  include-all: true
  uselightgbm: true
  collectdata: false
  interval: 300
  tolerance: 100
  latency-benchmark: https://www.gstatic.com/generate_204

proxy-groups:

# ä¸šåŠ¡åˆ†æµç»„  
  - {name: ChatGPT, <<: *default}
  - {name: Gemini, <<: *default}
  - {name: Copilot, <<: *default}
  - {name: Perplexity, <<: *default}
  - {name: Claude, <<: *default}
  - {name: MetaAI, <<: *default}
  - {name: Grok, <<: *default}
  - {name: Groq, <<: *default}
  - {name: OneDrive, <<: *default}
  - {name: GitHub, <<: *default}
  #- {name: Reddit, <<: *default}
  - {name: Telegram, <<: *default}
  - {name: WhatsApp, <<: *default}
  - {name: Facebook, <<: *default}
  #- {name: BiliBili, <<: *default}
  - {name: YouTube, <<: *default}
  - {name: TikTok, <<: *default}
  - {name: Netflix, <<: *default}
  - {name: HBO, <<: *default}
  - {name: Disney, <<: *default}
  - {name: Amazon, <<: *default}
  #- {name: Crunchyroll, <<: *default}
  #- {name: Popcorn, <<: *default}
  - {name: Spotify, <<: *default}
  #- {name: Nvidia, <<: *default}
  - {name: Steam, <<: *default}
  - {name: Games, <<: *default}
  - {name: Crypto, <<: *default}
  - {name: Apple, <<: *default}
  - {name: Google, <<: *default}
  - {name: Microsoft, <<: *default}
  - {name: Test, <<: *default}
  - {name: Block, <<: *default}
  - {name: å›½å¤–, <<: *default}
  - {name: å›½å†…, <<: *default}

 
# === æ™ºèƒ½åˆ†ç»„å®šä¹‰ ===
# è‡ªå»ºèŠ‚ç‚¹
#  - {name: è‡ªå»ºèŠ‚ç‚¹, <<: *smart, filter: "(?=.*(æ¬ç“¦å·¥|TUD)).*$"}
  - {name: è‡ªå»ºèŠ‚ç‚¹, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(æ¬ç“¦å·¥|TUD)).*$"}
  # è‡ªåŠ¨é€‰æ‹©
  - {name: æ‰€æœ‰-è‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "^((?!(ç›´è¿|æ‹’ç»)).)*$"}  
  # é¦™æ¸¯ç»„
  - {name: é¦™æ¸¯-æ™ºé€‰, <<: *smart, filter: "(?=.*(æ¸¯|é¦™æ¸¯|HK|Hong Kong|ğŸ‡­ğŸ‡°|HongKong)).*$"}
  # å°æ¹¾ç»„
  - {name: å°æ¹¾-æ™ºé€‰, <<: *smart, filter: "(?=.*(å°|å°æ¹¾|å°ç£|TW|Tai Wan|ğŸ‡¹ğŸ‡¼|ğŸ‡¨ğŸ‡³|TaiWan|Taiwan)).*$"}
  # æ—¥æœ¬ç»„
  - {name: æ—¥æœ¬-æ™ºé€‰, <<: *smart, filter: "(?=.*(æ—¥|æ—¥æœ¬|JP|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|ğŸ‡¯ğŸ‡µ|Japan)).*$"}
  # æ–°åŠ å¡ç»„
  - {name: æ–°åŠ å¡-æ™ºé€‰, <<: *smart, filter: "(?=.*(æ–°åŠ å¡|SG|å¡|ç‹®åŸ|ğŸ‡¸ğŸ‡¬|Singapore)).*$"}
  # éŸ©å›½ç»„
  - {name: éŸ©å›½-æ™ºé€‰, <<: *smart, filter: "(?=.*(éŸ©|éŸ©å›½|éŸ“åœ‹|KR|é¦–å°”|æ˜¥å·|ğŸ‡°ğŸ‡·|Korea)).*$"}
  # ç¾å›½ç»„
  - {name: ç¾å›½-æ™ºé€‰, <<: *smart, filter: "(?=.*(ç¾|US|çº½çº¦|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’|å‡¤å‡°åŸ|è´¹åˆ©è’™|æ‹‰æ–¯|æ´›æ‰|åœ£ä½•å¡|åœ£å…‹æ‹‰|è¥¿é›…|èŠåŠ |ğŸ‡ºğŸ‡¸|United States)).*$"}
  # AIç»„
  - {name: AI-æ™ºé€‰, <<: *smart, filter: "^((?!(æ¸¯|é¦™æ¸¯|HK|Hong Kong|ğŸ‡­ğŸ‡°|HongKong)).)*$"}
  # æ¼ç½‘ä¹‹é±¼
  - {name: æ¼ç½‘ä¹‹é±¼, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "^((?!(æ¸¯|é¦™æ¸¯|HK|Hong Kong|ğŸ‡­ğŸ‡°|HongKong|ç›´è¿|æ‹’ç»|èŠ‚ç‚¹|å‰©ä½™)).)*$"}

# ========================
# è§„åˆ™å¼•æ“ï¼ˆrulesï¼‰
# ========================
rules:

  - RULE-SET,OneDrive-Domain,OneDrive
  - RULE-SET,Block-Domain,Block  
  - RULE-SET,ChatGPT-Domain,ChatGPT
  - RULE-SET,Claude-Domain,Claude
  - RULE-SET,MetaAI-Domain,MetaAI
  - RULE-SET,Perplexity-Domain,Perplexity
  - RULE-SET,Copilot-Domain,Copilot
  - RULE-SET,Gemini-Domain,Gemini
  - RULE-SET,Groq-Domain,Groq
  - RULE-SET,Grok-Domain,Grok
  #- RULE-SET,Reddit-Domain,Reddit 
  - RULE-SET,GitHub-Domain,GitHub
  - RULE-SET,Telegram-Domain,Telegram
  - RULE-SET,Telegram-IP,Telegram
  - RULE-SET,WhatsApp-Domain,WhatsApp
  - RULE-SET,Facebook-Domain,Facebook
  - RULE-SET,Apple-Domain,Apple
  - RULE-SET,Apple-CN-Domain,Apple  
  - RULE-SET,Apple-Custome-Domain,Apple  
  - RULE-SET,Microsoft-Domain,Microsoft
  - RULE-SET,OKX-Domain,Crypto
  - RULE-SET,Bybit-Domain,Crypto
  - RULE-SET,Binance-Domain,Crypto
  #- RULE-SET,BiliBili-Domain,BiliBili
  - RULE-SET,Youtube-Domain,YouTube
  - RULE-SET,TikTok-Domain,TikTok
  - RULE-SET,Netflix-Domain,Netflix
  - RULE-SET,Netflix-IP,Netflix,no-resolve
  - RULE-SET,Disney-Domain,Disney
  - RULE-SET,Amazon-Domain,Amazon
  #- RULE-SET,Crunchyroll-Domain,Crunchyroll
  #- RULE-SET,Popcorn-Domain,Popcorn 
  - RULE-SET,HBO-Domain,HBO
  - RULE-SET,Spotify-Domain,Spotify
  - RULE-SET,Steam-Domain,Steam
  - RULE-SET,Epic-Domain,Games
  - RULE-SET,EA-Domain,Games
  - RULE-SET,Blizzard-Domain,Games
  - RULE-SET,UBI-Domain,Games
  - RULE-SET,PlayStation-Domain,Games
  - RULE-SET,Nintend-Domain,Games
  - RULE-SET,Google-Domain,Google
  - RULE-SET,Google-IP,Google,no-resolve
  #- RULE-SET,Nvidia-Domain,Nvidia 
  #- RULE-SET,Telegram-IP,å›½å¤–
  #- RULE-SET,Telegram-Domain,å›½å¤–
  - RULE-SET,TEST-Domain,Test
  - RULE-SET,Proxy-Domain,å›½å¤–
  - RULE-SET,Globe-Domain,å›½å¤–  
  - RULE-SET,Direct-Domain,å›½å†…
  - RULE-SET,China-Domain,å›½å†…
  - RULE-SET,China-IP,å›½å†…,no-resolve
  - RULE-SET,Private-Domain,å›½å†…
  - MATCH,æ¼ç½‘ä¹‹é±¼

# ========================
# è§„åˆ™é›†æä¾›è€…
# ========================
rule-anchor:
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: mrs}
  class: &class {type: http, interval: 86400, behavior: classical, format: text}

rule-providers:
  TEST-Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Check.list"}
  ChatGPT-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/openai.mrs"}
  Claude-Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Claude/Claude.list"}
  MetaAI-Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/MetaAi.list"}
  Perplexity-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/perplexity.mrs"}
  Copilot-Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Copilot.list"}
  Gemini-Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Gemini.list"}
  GitHub-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/github.mrs"}
  Telegram-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/telegram.mrs"}  
  Telegram-IP: {<<: *ip, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geoip/telegram.mrs"}
  Twitter-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/x.mrs"}
  WhatsApp-Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Whatsapp/Whatsapp.list"}
  Facebook-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/facebook.mrs"}
  Amazon-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/amazon.mrs"}
  Apple-CN-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/apple-cn.mrs"}
  Apple-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/apple.mrs"} 
  Apple-Custome-Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Apple.list"}
  Microsoft-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/microsoft.mrs"}
  OKX-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/okx.mrs"}
  Bybit-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/bybit.mrs"}
  Binance-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/binance.mrs"}
  TikTok-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/tiktok.mrs"}
  Netflix-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/netflix.mrs"}
  Netflix-IP: {<<: *ip, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geoip/netflix.mrs"}
  Disney-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/disney.mrs"}
  HBO-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/hbo.mrs"}
  Spotify-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/spotify.mrs"}
  Steam-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/steam.mrs"}
  Epic-Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Epic/Epic.list"}
  EA-Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/EA/EA.list"}
  Blizzard-Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Blizzard/Blizzard.list"}
  UBI-Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/UBI/UBI.list"}
  PlayStation-Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/PlayStation/PlayStation.list"}
  Nintend-Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Nintendo/Nintendo.list"}
  Proxy-Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Proxy.list"}
  Globe-Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Global/Global.list"} 
  Block-Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Block.list"}
  Nvidia-Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Nvidia/Nvidia.list"}
  Crunchyroll-Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Crunchyroll.list"}
#  Reddit-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/reddit.mrs"}
  Groq-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/groq.mrs"}
  Grok-Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Grok.list"}
  Popcorn-Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Popcorn.list"}
  Direct-Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Direct.list"}
  Private-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/private.mrs"}
  China-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/cn.mrs"}
  China-IP: {<<: *ip, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geoip/cn.mrs"}
  Youtube-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/youtube.mrs"}  
  Google-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/google.mrs"}  
  Google-IP: {<<: *ip, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geoip/google.mrs"}
  BiliBili-Domain: {<<: *domain,  url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/bilibili.mrs"}
  OneDrive-Domain: {<<: *class, url: "https://gh-proxy.com/raw.githubusercontent.com/leeyan6884/openclash/refs/heads/main/rule/OneDrive.list"}
  
#  GateFireWall-Domain: {<<: *domain, url: "https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/gfw.mrs"}